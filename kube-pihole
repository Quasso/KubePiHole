#!/bin/sh

# A simple but powerful CLI tool to automate k8s deployment of Pi-hole on a Pi (or elsewhere potentially)

ARGS=$*

export CLI_FRIENDLY_NAME="[Kube Pi Hole]"

cd $HOME/KubePiHole #Â this ensures relative paths work and we execute from the root of the repo

source scripts/install-required-packages.sh

function no_args() {
    echo "$CLI_FRIENDLY_NAME Error! You must supply at least one argument."
}

#
# Process the args supplied via CLI
#
if [[ $ARGS == 0 ]]; then
    no_args
else
    # At least one arg supplied, process what it is!
    COMMAND=${ARGS[0]}

    echo "$CLI_FRIENDLY_NAME Command was supplied ($COMMAND), handling..."

    if [[ $COMMAND == "install-dependencies" ]]; then
        echo "$CLI_FRIENDLY_NAME Installing depencies via helper, it will output useful info..."
        install_dependencies
    fi
fi
